default_platform(:ios)

platform :ios do
  desc "Build iOS app"
  lane :build do
    gym(scheme: "SynovaAI", export_method: "app-store")
  end

  desc "Release to App Store (template)"
  lane :release do
    api_key = app_store_connect_api_key(key_filepath: ENV['FASTLANE_APP_STORE_CONNECT_API_KEY_FILE'])
    build
    deliver(api_key: api_key, submit_for_review: false, automatic_release: false)
  end
end

platform :android do
  desc "Build Android app bundle"
  lane :build do
    gradle(task: "bundle", build_type: "Release")
  end

  desc "Upload to Play (template)"
  lane :release do
    build
    supply(track: "internal")
  end
end
